{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export function getImages(searchRequest) {\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const params = new URLSearchParams({\n        key: '44423384-360ba42c67bb4e928fcac247f',\n        q: searchRequest,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n    });\n\n    const url = `${BASE_URL}${END_POINT}?${params}`;\n   \n   \n    return fetch(url).then(res => {\n        if (!res) {\n            throw new Error(res.status);\n        }\n\n        return res.json();\n    })\n}\n","export function imagesTemplate(data) {\n    const addImages = [];\n    for (const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } of data.hits) {\n        addImages.push(`\n            <li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                 <img\n                     class=\"gallery-image\"\n                     src=\"${webformatURL}\"\n                     data-source=\"${largeImageURL}\"\n                     alt=\"${tags}\"\n                   />\n              </a>\n              <div class=\"gallery-info\">\n                 <ul class=\"gallery-info-list\">\n                     <li>\n                         <h3 class=\"gallery-info-name\">Likes</h3>\n                         <p class=\"gallery-info-text\">${likes}</p>\n                     </li>\n                     <li>\n                         <h3 class=\"gallery-info-name\">Views</h3>\n                         <p class=\"gallery-info-text\">${views}</p>\n                     </li>\n                     <li>\n                         <h3 class=\"gallery-info-name\">Comments</h3>\n                         <p class=\"gallery-info-text\">${comments}</p>\n                     </li>\n                     <li>\n                         <h3 class=\"gallery-info-name\">Downloads</h3>\n                         <p class=\"gallery-info-text\">${downloads}</p>\n                     </li>\n                 </ul>\n             </div>\n         </li>`);\n    }\n    return addImages;\n}","import { getImages } from \"./js/pixabay-api\";\nimport { imagesTemplate } from \"./js/render-functions\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst formInput = document.querySelector('.search-images-form');\nconst gallery = document.querySelector('.gallery');\nconst loadImg = document.querySelector('.loader');\n\nlet captionDisplay = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nformInput.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    while (gallery.firstChild) {gallery.removeChild(gallery.firstChild)}\n    \n    const searchRequest = e.target.elements.input.value.trim();\n    if (!searchRequest) {\n        return iziToast.error({\n            position: 'topRight',\n            backgroundColor: 'red',\n            theme: 'dark',\n            title: 'Error',\n            titleColor: 'white',\n            message: `Search field is empty`,\n            messageColor: 'white',\n        });\n    }\n\n    loadImg.classList.remove('visually-hidden');\n\n    getImages(searchRequest)\n        .then(data => {\n        if (!data.total) {\n            loadImg.classList.add('visually-hidden');\n\n            return iziToast.error({\n            position: 'topRight',\n            backgroundColor: 'red',\n            theme: 'dark',\n            title: 'Error',\n            titleColor: 'white',\n            message: `Sorry, there are no images matching your search query. Please try again!`,\n            messageColor: 'white',\n            maxWidth: 400,\n            });\n        }\n            \n        return data;\n        })\n        .then(data => {\n            const markup = imagesTemplate(data);\n            gallery.insertAdjacentHTML(\"afterbegin\", markup.join(\"\"));\n            \n            captionDisplay.refresh();\n            \n            loadImg.classList.add('visually-hidden');\n        })\n        .catch(error => {\n            return iziToast.error({\n            position: 'topRight',\n            backgroundColor: 'red',\n            theme: 'dark',\n            title: 'Error',\n            titleColor: 'white',\n            message: `${error}`,\n            messageColor: 'white',\n            maxWidth: 400,\n            });\n        });\n    \n    formInput.reset();\n})"],"names":["getImages","searchRequest","BASE_URL","END_POINT","params","url","res","imagesTemplate","data","addImages","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formInput","gallery","loadImg","captionDisplay","SimpleLightbox","e","iziToast","markup","error"],"mappings":"6vBAAO,SAASA,EAAUC,EAAe,CACrC,MAAMC,EAAW,sBACXC,EAAY,QACZC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MACpB,CAAK,EAEKI,EAAM,GAAGH,CAAQ,GAAGC,CAAS,IAAIC,CAAM,GAG7C,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAO,CAC1B,GAAI,CAACA,EACD,MAAM,IAAI,MAAMA,EAAI,MAAM,EAG9B,OAAOA,EAAI,MACnB,CAAK,CACL,CCrBO,SAASC,EAAeC,EAAM,CACjC,MAAMC,EAAY,CAAA,EAClB,SAAW,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KAAeR,EAAK,KACxFC,EAAU,KAAK;AAAA;AAAA,8CAEuBE,CAAa;AAAA;AAAA;AAAA,4BAG/BD,CAAY;AAAA,oCACJC,CAAa;AAAA,4BACrBC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wDAOwBC,CAAK;AAAA;AAAA;AAAA;AAAA,wDAILC,CAAK;AAAA;AAAA;AAAA;AAAA,wDAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,wDAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,eAIlD,EAEX,OAAOP,CACX,CC7BA,MAAMQ,EAAY,SAAS,cAAc,qBAAqB,EACxDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,SAAS,EAEhD,IAAIC,EAAiB,IAAIC,EAAe,aAAc,CACpD,aAAc,MACd,aAAc,GAChB,CAAC,EAEDJ,EAAU,iBAAiB,SAAWK,GAAM,CAGxC,IAFAA,EAAE,eAAc,EAETJ,EAAQ,YAAaA,EAAQ,YAAYA,EAAQ,UAAU,EAElE,MAAMjB,EAAgBqB,EAAE,OAAO,SAAS,MAAM,MAAM,OACpD,GAAI,CAACrB,EACD,OAAOsB,EAAS,MAAM,CAClB,SAAU,WACV,gBAAiB,MACjB,MAAO,OACP,MAAO,QACP,WAAY,QACZ,QAAS,wBACT,aAAc,OAC1B,CAAS,EAGLJ,EAAQ,UAAU,OAAO,iBAAiB,EAE1CnB,EAAUC,CAAa,EAClB,KAAKO,GACDA,EAAK,MAeHA,GAdHW,EAAQ,UAAU,IAAI,iBAAiB,EAEhCI,EAAS,MAAM,CACtB,SAAU,WACV,gBAAiB,MACjB,MAAO,OACP,MAAO,QACP,WAAY,QACZ,QAAS,2EACT,aAAc,QACd,SAAU,GACtB,CAAa,EAIJ,EACA,KAAKf,GAAQ,CACV,MAAMgB,EAASjB,EAAeC,CAAI,EAClCU,EAAQ,mBAAmB,aAAcM,EAAO,KAAK,EAAE,CAAC,EAExDJ,EAAe,QAAO,EAEtBD,EAAQ,UAAU,IAAI,iBAAiB,CACnD,CAAS,EACA,MAAMM,GACIF,EAAS,MAAM,CACtB,SAAU,WACV,gBAAiB,MACjB,MAAO,OACP,MAAO,QACP,WAAY,QACZ,QAAS,GAAGE,CAAK,GACjB,aAAc,QACd,SAAU,GACtB,CAAa,CACJ,EAELR,EAAU,MAAK,CACnB,CAAC"}